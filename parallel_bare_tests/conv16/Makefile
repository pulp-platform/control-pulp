PULP_APP = test
PULP_APP_SRCS = conv16.c

PULP_CFLAGS = -O3

include $(PULP_SDK_HOME)/install/rules/pulp.mk

#pulp-bench-reg --name=conv16.cycles --module=pulp_rtl_testset --pipeline=$(PIPELINE) --artefact=pulp_rtl_testset --cmd="make run -f Makefile.sdk" --probe-regexp='sequential convolution, errors=0, time_hi=0, time=(\d+)' --params="platform($(platformName)),compiler($(OR1K_TOOLCHAIN_TYPE)),nbCores(1),seq" --probe-regexp='sequential loop-unrolled convolution, errors=0, time_hi=0, time=(\d+)' --params="platform($(platformName)),compiler($(OR1K_TOOLCHAIN_TYPE)),nbCores(1),seqUnroll" --probe-regexp='sequential loop-unrolled pointer-optimized convolution, errors=0, time_hi=0, time=(\d+)' --params="platform($(platformName)),compiler($(OR1K_TOOLCHAIN_TYPE)),nbCores(1),seqUnrollPtrOptim" --probe-regexp='4-threaded convolution \(1 thread per output pixel\), errors=0, time_hi=0, time=(\d+)' --params="platform($(platformName)),compiler($(OR1K_TOOLCHAIN_TYPE)),nbCores(4)" --probe-regexp='4-threaded loop-unrolled convolution \(1 thread per output pixel\), errors=0, time_hi=0, time=(\d+)' --params="platform($(platformName)),compiler($(OR1K_TOOLCHAIN_TYPE)),nbCores(4),unroll" --probe-regexp='4-threaded loop-unrolled pointer-optimized convolution \(1 thread per output pixel\), errors=0, time_hi=0, time=(\d+)' --params="platform($(platformName)),compiler($(OR1K_TOOLCHAIN_TYPE)),nbCores(4),unrollPtrOptim" --probe-regexp='4-threaded convolution \(1 thread per output row\), errors=0, time_hi=0, time=(\d+)' --params="platform($(platformName)),compiler($(OR1K_TOOLCHAIN_TYPE)),nbCores(4),row" --probe-regexp='4-threaded loop-unrolled convolution \(1 thread per output row\), errors=0, time_hi=0, time=(\d+)' --params="platform($(platformName)),compiler($(OR1K_TOOLCHAIN_TYPE)),nbCores(4),rowUnroll" --probe-regexp='4-threaded loop-unrolled pointer-optimized convolution \(1 thread per output row\), errors=0, time_hi=0, time=(\d+)' --params="platform($(platformName)),compiler($(OR1K_TOOLCHAIN_TYPE)),nbCores(4),rowUnrollPtrOptim"
